<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ö‡∏¥‡∏•</title>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üë®‚Äçüç≥</text></svg>">
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="styles/kitchen-main.css">
    <link rel="stylesheet" href="styles/kitchen-responsive.css">
    <link rel="stylesheet" href="styles/kitchen-modals.css">
    
    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&family=Sarabun:wght@300;400;500&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
    
    <!-- CSS Animation Styles -->
    <style>
        /* Animation for notifications */
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Loading Spinner */
        #global-loading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }
        
        .loading-overlay {
            background: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        .loading-text {
            color: #333;
            font-size: 16px;
            margin-top: 10px;
        }
        
        /* Modal Animation */
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .modal-overlay {
            animation: fadeIn 0.3s ease-out;
        }
        
        .modal-content {
            animation: modalSlideIn 0.3s ease-out;
        }
        
        /* ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ã‡πà‡∏≠‡∏ô loading */
        .products-loading,
        .bills-loading {
            display: none;
        }
        
        .products-grid:empty + .products-loading,
        .bills-container:empty + .bills-loading {
            display: block;
        }
    </style>
</head>
<body class="kitchen-body">
    <!-- Loading Spinner -->
    <div id="global-loading">
        <div class="loading-overlay">
            <div class="loading-spinner"></div>
            <div class="loading-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
        </div>
    </div>
    
    <!-- Header -->
    <header class="header kitchen-header">
        <div class="container">
            <div class="logo">
                <i class="fas fa-utensils"></i>
                <h1>‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß</h1>
                <span class="subtitle">‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏≠‡∏≤‡∏ä‡∏µ‡∏ß‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏•‡∏≥‡∏õ‡∏≤‡∏á</span>
            </div>
            <nav class="kitchen-nav">
                <button class="nav-btn active" id="productsBtn">
                    <i class="fas fa-list"></i> 
                    <span class="btn-text">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</span>
                </button>
                <button class="nav-btn" id="billsBtn">
                    <i class="fas fa-receipt"></i> 
                    <span class="btn-text">‡∏ö‡∏¥‡∏•</span>
                </button>
                <button class="nav-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> 
                    <span class="btn-text">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</span>
                </button>
            </nav>
        </div>
    </header>

    <main class="main-content kitchen-main">
        <div class="container">
            <!-- Products Section -->
            <section class="kitchen-section active" id="productsSection">
                <div class="section-header">
                    <h2><i class="fas fa-list"></i> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
                    <button class="btn btn-primary" id="addProductBtn">
                        <i class="fas fa-plus"></i> <span class="btn-text">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</span>
                    </button>
                </div>
                
                <!-- Product Form Modal -->
                <div class="modal-overlay" id="productModal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <div class="modal-title">
                                <i class="fas fa-utensils"></i>
                                <h3><span id="modalTitle">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</span></h3>
                            </div>
                            <button class="close-modal" id="closeProductModal">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form id="productForm">
                                <div class="form-group">
                                    <label for="productName" class="form-label">
                                        <i class="fas fa-tag"></i> ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                                    </label>
                                    <input type="text" id="productName" class="form-input" required placeholder="‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤">
                                </div>
                                
                                <div class="form-group">
                                    <label for="productDescription" class="form-label">
                                        <i class="fas fa-align-left"></i> ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢
                                    </label>
                                    <textarea id="productDescription" class="form-input" rows="3" placeholder="‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"></textarea>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="productPrice" class="form-label">
                                            <i class="fas fa-money-bill-wave"></i> ‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)
                                        </label>
                                        <input type="number" id="productPrice" class="form-input" min="0" step="0.01" required placeholder="0.00">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="productCategory" class="form-label">
                                            <i class="fas fa-filter"></i> ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
                                        </label>
                                        <select id="productCategory" class="form-input" required>
                                            <option value="food">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å</option>
                                            <option value="appetizer">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ß‡πà‡∏≤‡∏á</option>
                                            <option value="dessert">‡∏Ç‡∏≠‡∏á‡∏´‡∏ß‡∏≤‡∏ô</option>
                                            <option value="drink">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="productImage" class="form-label">
                                        <i class="fas fa-image"></i> ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                                    </label>
                                    <input type="file" id="productImage" class="form-input" accept="image/*">
                                    <div class="image-preview-container">
                                        <div class="image-preview" id="imagePreview">
                                            <i class="fas fa-image"></i>
                                            <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</p>
                                        </div>
                                        <div class="image-hint">
                                            <i class="fas fa-info-circle"></i>
                                            <span>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û JPG, PNG ‡∏´‡∏£‡∏∑‡∏≠ GIF ‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 5MB</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="productAvailable" checked>
                                        <span class="checkbox-text">
                                            <i class="fas fa-check-circle"></i>
                                            ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏°‡∏µ‡πÉ‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å
                                        </span>
                                    </label>
                                </div>
                                
                                <input type="hidden" id="productId">
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" id="cancelProduct">
                                <i class="fas fa-times"></i> ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                            </button>
                            <button type="submit" form="productForm" class="btn btn-primary" id="saveProduct">
                                <i class="fas fa-save"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Products Grid -->
                <div class="products-grid-container">
                    <div class="products-grid" id="productsGrid">
                        <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÇ‡∏î‡∏¢ JavaScript -->
                    </div>
                    
                    <!-- Loading State -->
                    <div class="products-loading">
                        <div class="loading-spinner"></div>
                        <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤...</p>
                    </div>
                    
                    <!-- Empty State -->
                    <div class="empty-state" id="productsEmptyState">
                        <i class="fas fa-utensils"></i>
                        <h3>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
                        <p>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏£‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÇ‡∏î‡∏¢‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"</p>
                    </div>
                </div>
            </section>

            <!-- Bills Section -->
            <section class="kitchen-section" id="billsSection">
                <div class="section-header">
                    <h2><i class="fas fa-receipt"></i> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏¥‡∏•</h2>
                    <div class="bill-filters-container">
                        <div class="filters-label">
                            <i class="fas fa-filter"></i>
                            <span>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</span>
                        </div>
                        <div class="bill-filters">
                            <button class="filter-btn active" data-status="pending">
                                <i class="fas fa-clock"></i> ‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£
                            </button>
                            <button class="filter-btn" data-status="preparing">
                                <i class="fas fa-clock"></i> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°
                            </button>
                            <button class="filter-btn" data-status="completed">
                                <i class="fas fa-check-circle"></i> ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Bills List -->
                <div class="bills-container" id="billsContainer">
                    <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ö‡∏¥‡∏•‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÇ‡∏î‡∏¢ JavaScript -->
                </div>
                
                <!-- Loading State -->
                <div class="bills-loading">
                    <div class="loading-spinner"></div>
                    <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ö‡∏¥‡∏•...</p>
                </div>
            </section>
        </div>
    </main>

    <!-- Order Completion Modal -->
    <div class="modal-overlay" id="completionModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-check-circle"></i>
                    <h3>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</h3>
                </div>
                <button class="close-modal" id="closeCompletionModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="completion-message">
                    <i class="fas fa-question-circle"></i>
                    <div class="message-content">
                        <h4>‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏ö‡∏¥‡∏•‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç <span id="billNumber"></span> ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</h4>
                        <p>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelCompletion">
                    <i class="fas fa-times"></i> ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                </button>
                <button class="btn btn-primary" id="confirmCompletion">
                    <i class="fas fa-check"></i> ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
                </button>
            </div>
        </div>
    </div>

    <!-- Back to Customer View -->
    <div class="back-to-customer">
        <button class="btn-customer" id="backToCustomer">
            <i class="fas fa-users"></i>
            <span class="btn-text">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</span>
        </button>
    </div>
    <!-- JavaScript Modules -->
    <script type="module" src="../app/firebase-config.js"></script>
    <script type="module" src="../kitchen/firebase-service-v2.js"></script>
    <script type="module" src="../kitchen/kitchenmain.js"></script>

    <!-- JavaScript Imports -->
    <script type="module">
        // Import Firebase config and services
        import firebaseService from './firebase-service-v2.js';
        
        // Import the main kitchen app
        import '../kitchen/kitchen-main.js';
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìÑ Kitchen page loaded');
            
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: ‡∏ã‡πà‡∏≠‡∏ô loading states
            const productsEmptyState = document.getElementById('productsEmptyState');
            const productsLoading = document.querySelector('.products-loading');
            const billsLoading = document.querySelector('.bills-loading');
            
            if (productsEmptyState) productsEmptyState.style.display = 'none';
            if (productsLoading) productsLoading.style.display = 'block';
            if (billsLoading) billsLoading.style.display = 'block';
            
            // Debug helper
            window.getKitchenStatus = function() {
                return {
                    loaded: !!window.kitchenApp,
                    initialized: window.kitchenApp ? window.kitchenApp.isInitialized : false,
                    currentSection: window.kitchenApp ? window.kitchenApp.currentSection : 'N/A',
                    currentShop: window.kitchenApp ? window.kitchenApp.currentShop : 'N/A'
                };
            };
            
            // Test function
            window.testKitchen = async function() {
                console.log('Testing kitchen app connection...');
                
                if (window.kitchenApp) {
                    console.log('Kitchen app is loaded:', window.kitchenApp);
                    
                    // ‡πÅ‡∏™‡∏î‡∏á loading state ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö
                    const productsGrid = document.getElementById('productsGrid');
                    const billsContainer = document.getElementById('billsContainer');
                    
                    if (productsGrid) {
                        productsGrid.innerHTML = `
                            <div class="kitchen-product-card">
                                <div class="kitchen-product-image-container">
                                    <img src="https://images.unsplash.com/photo-1555939594-58d7cb561ad1?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=80" 
                                         alt="‡∏ó‡∏î‡∏™‡∏≠‡∏ö" 
                                         class="kitchen-product-image">
                                    <div class="kitchen-product-status status-available">‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢</div>
                                </div>
                                <div class="kitchen-product-info">
                                    <div class="kitchen-product-header">
                                        <h3 class="kitchen-product-name">‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢</h3>
                                        <span class="kitchen-product-price">60.00 ‡∏ö‡∏≤‡∏ó</span>
                                    </div>
                                    <p class="kitchen-product-description">‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢‡∏™‡∏π‡∏ï‡∏£‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°</p>
                                    <div class="kitchen-product-meta">
                                        <span class="kitchen-product-category">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å</span>
                                        <span class="kitchen-product-shop">‡∏õ‡πâ‡∏≤‡∏™‡∏µ</span>
                                    </div>
                                    <div class="kitchen-product-actions">
                                        <button class="action-btn edit-btn">
                                            <i class="fas fa-edit"></i> ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                                        </button>
                                        <button class="action-btn delete-btn">
                                            <i class="fas fa-trash"></i> ‡∏•‡∏ö
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `;
                        
                        // ‡∏ã‡πà‡∏≠‡∏ô loading
                        if (productsLoading) productsLoading.style.display = 'none';
                        if (productsEmptyState) productsEmptyState.style.display = 'none';
                    }
                    
                    if (billsContainer) {
                        billsContainer.innerHTML = `
                            <div class="bill-card">
                                <div class="bill-header">
                                    <div class="bill-info">
                                        <div class="bill-number">‡∏ö‡∏¥‡∏• #TEST001</div>
                                        <div class="bill-shop">‡∏£‡πâ‡∏≤‡∏ô: ‡∏õ‡πâ‡∏≤‡∏™‡∏µ</div>
                                    </div>
                                    <div class="bill-status status-pending">‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</div>
                                </div>
                                
                                <div class="bill-details">
                                    <div class="customer-info">
                                        <div class="info-row">
                                            <i class="fas fa-user"></i>
                                            <span>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏î‡∏™‡∏≠‡∏ö</span>
                                        </div>
                                        <div class="info-row">
                                            <i class="fas fa-table"></i>
                                            <span>‡πÇ‡∏ï‡πä‡∏∞: 1</span>
                                        </div>
                                        <div class="info-row">
                                            <i class="fas fa-clock"></i>
                                            <span>‡πÄ‡∏ß‡∏•‡∏≤: 12:00</span>
                                        </div>
                                    </div>
                                    
                                    <div class="bill-items">
                                        <h4><i class="fas fa-list"></i> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h4>
                                        <div class="bill-item">
                                            <span class="item-name">1x ‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢</span>
                                            <span class="item-price">60.00 ‡∏ö‡∏≤‡∏ó</span>
                                        </div>
                                    </div>
                                    
                                    <div class="bill-total">
                                        <span>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:</span>
                                        <span class="total-amount">60.00 ‡∏ö‡∏≤‡∏ó</span>
                                    </div>
                                </div>
                                
                                <div class="bill-actions">
                                    <button class="action-btn prepare-btn">
                                        <i class="fas fa-clock"></i> ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°
                                    </button>
                                    <button class="action-btn view-btn">
                                        <i class="fas fa-eye"></i> ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
                                    </button>
                                </div>
                            </div>
                        `;
                        
                        // ‡∏ã‡πà‡∏≠‡∏ô loading
                        if (billsLoading) billsLoading.style.display = 'none';
                    }
                    
                    return true;
                }
                
                console.log('Kitchen app is not loaded yet');
                return false;
            };
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏£‡∏±‡∏ß
            const checkKitchenAccess = () => {
                const kitchenAccess = sessionStorage.getItem('kitchenAccess');
                console.log('üîê Kitchen access status:', kitchenAccess);
                
                if (!kitchenAccess || kitchenAccess !== 'granted') {
                    console.log('‚ö†Ô∏è No kitchen access, redirecting to login...');
                    window.location.href = 'index.html';
                }
            };
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
            checkKitchenAccess();
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            setInterval(checkKitchenAccess, 30000);
            
            // ‡∏ñ‡πâ‡∏≤ app ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
            setTimeout(() => {
                if (!window.kitchenApp || !window.kitchenApp.isInitialized) {
                    console.warn('‚ö†Ô∏è Kitchen app not initialized after timeout');
                    
                    // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
                    window.testKitchen().then(success => {
                        if (success) {
                            console.log('‚úÖ Test data loaded successfully');
                        }
                    });
                }
            }, 5000);
        });
    </script>
</body>
</html>